{"version":3,"sources":["employment_rules_template.js","knockout.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"employment-rules-template.js","sourcesContent":["function Template() {\r\n    var self = this;\r\n    self.id = ko.observable();\r\n    self.name = ko.observable(\"New Template\");\r\n    self.min_shift_length = ko.observable(\"\");\r\n    self.max_shift_length = ko.observable(\"\");\r\n    self.min_hours_per_week = ko.observable(\"\");\r\n    self.max_hours_per_week = ko.observable(\"\");\r\n    self.min_time_between_breaks = ko.observable(\"\");\r\n    self.max_time_between_breaks = ko.observable(\"\");\r\n    self.min_shifts_per_week = ko.observable(\"\");\r\n    self.max_shifts_per_week = ko.observable(\"\");\r\n    self.min_time_between_shifts = ko.observable(\"\");\r\n    self.saturday_pay_multiplier = ko.observable(\"\");\r\n    self.sunday_pay_multiplier = ko.observable(\"\");\r\n    self.overtime_pay_multiplier = ko.observable(\"\");\r\n    self.hours_before_overtime_rate = ko.observable(\"\");\r\n\r\n    self.saving = ko.observable(\"Save\");\r\n}\r\n\r\nTemplate.prototype.toJSON = function() {\r\n    var self = this;\r\n    var json_obj = {};\r\n    console.log(self);\r\n    $.each(self, function(key, val) {\r\n        if(typeof val !== 'undefined' && val !== '' && key !== 'saving' && !isFunction(val)) {\r\n            json_obj[key] = val;\r\n        }\r\n    });\r\n\r\n    return json_obj;\r\n};\r\n\r\nTemplate.prototype.addTemplate = function(template) {\r\n    var self = this;\r\n\r\n    self.id(template.id);\r\n    self.name(template.name);\r\n    self.min_shift_length(template.min_shift_length);\r\n    self.max_shift_length(template.max_shift_length);\r\n    self.min_hours_per_week(template.min_hours_per_week);\r\n    self.max_hours_per_week(template.max_hours_per_week);\r\n    self.min_time_between_breaks(template.min_time_between_breaks);\r\n    self.max_time_between_breaks(template.max_time_between_breaks);\r\n    self.min_shifts_per_week(template.min_shifts_per_week);\r\n    self.max_shifts_per_week(template.max_shifts_per_week);\r\n    self.min_time_between_shifts(template.min_time_between_shifts);\r\n    self.saturday_pay_multiplier(template.saturday_pay_multiplier);\r\n    self.sunday_pay_multiplier(template.sunday_pay_multiplier);\r\n    self.overtime_pay_multiplier(template.overtime_pay_multiplier);\r\n    self.hours_before_overtime_rate(template.hours_before_overtime_rate);\r\n\r\n    return self;\r\n};\r\n\r\nTemplate.prototype.copy = function() {\r\n    var self = this;\r\n    var new_template = new Template();\r\n\r\n    new_template.name(\"Copy of \" + self.name());\r\n    new_template.min_shift_length(self.min_shift_length());\r\n    new_template.max_shift_length(self.max_shift_length());\r\n    new_template.min_hours_per_week(self.min_hours_per_week());\r\n    new_template.max_hours_per_week(self.max_hours_per_week());\r\n    new_template.min_time_between_breaks(self.min_time_between_breaks());\r\n    new_template.max_time_between_breaks(self.max_time_between_breaks());\r\n    new_template.min_shifts_per_week(self.min_shifts_per_week());\r\n    new_template.max_shifts_per_week(self.max_shifts_per_week());\r\n    new_template.min_time_between_shifts(self.min_time_between_shifts());\r\n    new_template.saturday_pay_multiplier(self.saturday_pay_multiplier());\r\n    new_template.sunday_pay_multiplier(self.sunday_pay_multiplier());\r\n    new_template.overtime_pay_multiplier(self.overtime_pay_multiplier());\r\n    new_template.hours_before_overtime_rate(self.hours_before_overtime_rate());\r\n\r\n    return new_template;\r\n};\r\n\r\nTemplate.prototype.remove = function() {\r\n    var self = this;\r\n\r\n    if(typeof self.id() !== 'undefined') {\r\n        $.ajax({\r\n            url: 'employment-rules/template',\r\n            data: {'id': self.id()},\r\n            type: 'DELETE',\r\n            success: function(result) {}\r\n        });\r\n    }\r\n};\r\n\r\nTemplate.prototype.save = function() {\r\n    var self = this;\r\n    self.saving(\"Saving...\");\r\n    $.post(\r\n        \"employment-rules/template\",\r\n        ko.toJSON(self),\r\n        function(returnedData) {\r\n            if(typeof returnedData.data.id !== 'undefined' && returnedData.data.id !== null) self.id(returnedData.data.id);\r\n            self.saving(\"Save\");\r\n        }\r\n    );\r\n};\r\n\r\nfunction isFunction(functionToCheck) {\r\n    var getType = {};\r\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\r\n}","function EmploymentRulesTemplateViewModel() {\r\n    var self = this;\r\n\r\n    self.templates = ko.observableArray([]);\r\n    self.selected_template = ko.observable(new Template);\r\n\r\n    self.newTemplate = function() {\r\n        var template = new Template();\r\n        self.templates.unshift(template);\r\n        self.selected_template(template);\r\n    };\r\n\r\n    self.copyTemplate = function() {\r\n        var template = self.selected_template().copy();\r\n\r\n        self.templates.push(template);\r\n        self.selected_template(template);\r\n    };\r\n\r\n    self.back_modal = {\r\n        show: ko.observable(false), /* Set to true to show initially */\r\n        onClose: function() {}\r\n    };\r\n\r\n    self.showBackModal = function() {\r\n        self.back_modal.show(true);\r\n    };\r\n\r\n    self.deleteTemplate = function() {\r\n        self.selected_template().remove();\r\n        self.templates.remove(self.selected_template());\r\n        if(self.templates().length === 0) self.templates.push(new Template);\r\n        self.selected_template(self.templates()[0]);\r\n    };\r\n\r\n    $.getJSON(\"employment-rules/template\", function(allData) {\r\n        if(allData.result === 0)\r\n            self.templates($.map(allData.data, function(val, key) {var template = new Template; return template.addTemplate(val)}));\r\n        self.templates.unshift(new Template);\r\n    });\r\n}\r\n\r\nvar employment_rules_template_view_model = new EmploymentRulesTemplateViewModel();\r\n\r\nko.applyBindings(employment_rules_template_view_model);"],"sourceRoot":"/source/"}