{"version":3,"sources":["bootstrap.datepicker.js","moment-range.js","knockout.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC79BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"view-roster.js","sourcesContent":["/* =========================================================\r\n * bootstrap-datepicker.js\r\n * http://www.eyecon.ro/bootstrap-datepicker\r\n * =========================================================\r\n * Copyright 2012 Stefan Petre\r\n * Improvements by Andrew Rowls\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n!function( $ ) {\r\n\r\n\tfunction UTCDate(){\r\n\t\treturn new Date(Date.UTC.apply(Date, arguments));\r\n\t}\r\n\tfunction UTCToday(){\r\n\t\tvar today = new Date();\r\n\t\treturn UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\r\n\t}\r\n\r\n\t// Picker object\r\n\r\n\tvar Datepicker = function(element, options) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.element = $(element);\r\n\t\tthis.language = options.language||this.element.data('date-language')||\"en\";\r\n\t\tthis.language = this.language in dates ? this.language : this.language.split('-')[0]; //Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\r\n\t\tthis.language = this.language in dates ? this.language : \"en\";\r\n\t\tthis.isRTL = dates[this.language].rtl||false;\r\n\t\tthis.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||dates[this.language].format||'mm/dd/yyyy');\r\n\t\tthis.isInline = false;\r\n\t\tthis.isInput = this.element.is('input');\r\n\t\tthis.component = this.element.is('.date') ? this.element.find('.add-on') : false;\r\n\t\tthis.hasInput = this.component && this.element.find('input').length;\r\n\t\tif(this.component && this.component.length === 0)\r\n\t\t\tthis.component = false;\r\n\r\n\t\tthis._attachEvents();\r\n\r\n\t\tthis.forceParse = true;\r\n\t\tif ('forceParse' in options) {\r\n\t\t\tthis.forceParse = options.forceParse;\r\n\t\t} else if ('dateForceParse' in this.element.data()) {\r\n\t\t\tthis.forceParse = this.element.data('date-force-parse');\r\n\t\t}\r\n\r\n\r\n\t\tthis.picker = $(DPGlobal.template)\r\n\t\t\t\t\t\t\t.appendTo(this.isInline ? this.element : 'body')\r\n\t\t\t\t\t\t\t.on({\r\n\t\t\t\t\t\t\t\tclick: $.proxy(this.click, this),\r\n\t\t\t\t\t\t\t\tmousedown: $.proxy(this.mousedown, this)\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\tif(this.isInline) {\r\n\t\t\tthis.picker.addClass('datepicker-inline');\r\n\t\t} else {\r\n\t\t\tthis.picker.addClass('datepicker-dropdown dropdown-menu');\r\n\t\t}\r\n\t\tif (this.isRTL){\r\n\t\t\tthis.picker.addClass('datepicker-rtl');\r\n\t\t\tthis.picker.find('.prev i, .next i')\r\n\t\t\t\t\t\t.toggleClass('fa fa-arrow-left fa fa-arrow-right');\r\n\t\t}\r\n\t\t$(document).on('mousedown', function (e) {\r\n\t\t\t// Clicked outside the datepicker, hide it\r\n\t\t\tif ($(e.target).closest('.datepicker.datepicker-inline, .datepicker.datepicker-dropdown').length === 0) {\r\n\t\t\t\tthat.hide();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.autoclose = false;\r\n\t\tif ('autoclose' in options) {\r\n\t\t\tthis.autoclose = options.autoclose;\r\n\t\t} else if ('dateAutoclose' in this.element.data()) {\r\n\t\t\tthis.autoclose = this.element.data('date-autoclose');\r\n\t\t}\r\n\r\n\t\tthis.keyboardNavigation = true;\r\n\t\tif ('keyboardNavigation' in options) {\r\n\t\t\tthis.keyboardNavigation = options.keyboardNavigation;\r\n\t\t} else if ('dateKeyboardNavigation' in this.element.data()) {\r\n\t\t\tthis.keyboardNavigation = this.element.data('date-keyboard-navigation');\r\n\t\t}\r\n\r\n\t\tthis.viewMode = this.startViewMode = 0;\r\n\t\tswitch(options.startView || this.element.data('date-start-view')){\r\n\t\t\tcase 2:\r\n\t\t\tcase 'decade':\r\n\t\t\t\tthis.viewMode = this.startViewMode = 2;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\tcase 'year':\r\n\t\t\t\tthis.viewMode = this.startViewMode = 1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.todayBtn = (options.todayBtn||this.element.data('date-today-btn')||false);\r\n\t\tthis.todayHighlight = (options.todayHighlight||this.element.data('date-today-highlight')||false);\r\n\r\n\t\tthis.calendarWeeks = false;\r\n\t\tif ('calendarWeeks' in options) {\r\n\t\t\tthis.calendarWeeks = options.calendarWeeks;\r\n\t\t} else if ('dateCalendarWeeks' in this.element.data()) {\r\n\t\t\tthis.calendarWeeks = this.element.data('date-calendar-weeks');\r\n\t\t}\r\n\t\tif (this.calendarWeeks)\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t\t\t.attr('colspan', function(i, val){\r\n\t\t\t\t\t\t\treturn parseInt(val) + 1;\r\n\t\t\t\t\t\t});\r\n\r\n\t\tthis.weekStart = ((options.weekStart||this.element.data('date-weekstart')||dates[this.language].weekStart||0) % 7);\r\n\t\tthis.weekEnd = ((this.weekStart + 6) % 7);\r\n\t\tthis.startDate = -Infinity;\r\n\t\tthis.endDate = Infinity;\r\n\t\tthis.daysOfWeekDisabled = [];\r\n\t\tthis.setStartDate(options.startDate||this.element.data('date-startdate'));\r\n\t\tthis.setEndDate(options.endDate||this.element.data('date-enddate'));\r\n\t\tthis.setDaysOfWeekDisabled(options.daysOfWeekDisabled||this.element.data('date-days-of-week-disabled'));\r\n\t\tthis.fillDow();\r\n\t\tthis.fillMonths();\r\n\t\tthis.update();\r\n\t\tthis.showMode();\r\n\r\n\t\tif(this.isInline) {\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tDatepicker.prototype = {\r\n\t\tconstructor: Datepicker,\r\n\r\n\t\t_events: [],\r\n\t\t_attachEvents: function(){\r\n\t\t\tthis._detachEvents();\r\n\t\t\tif (this.isInput) { // single input\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\t// focus: $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup: $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this),\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.component && this.hasInput){ // component: input + button\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t// For components that are not readonly, allow keyboard nav\r\n\t\t\t\t\t[this.element.find('input'), {\r\n\t\t\t\t\t\tfocus: $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup: $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[this.component, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\t\t\t\telse if (this.element.is('div')) {  // inline datepicker\r\n\t\t\t\t\t\t\tthis.isInline = true;\r\n\t\t\t\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tfor (var i=0, el, ev; i<this._events.length; i++){\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.on(ev);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_detachEvents: function(){\r\n\t\t\tfor (var i=0, el, ev; i<this._events.length; i++){\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.off(ev);\r\n\t\t\t}\r\n\t\t\tthis._events = [];\r\n\t\t},\r\n\r\n\t\tshow: function(e) {\r\n\t\t\tthis.picker.show();\r\n\t\t\tthis.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n\t\t\tthis.update();\r\n\t\t\tthis.place();\r\n\t\t\t$(window).on('resize', $.proxy(this.place, this));\r\n\t\t\tif (e ) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'show',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\thide: function(e){\r\n\t\t\tif(this.isInline) return;\r\n\t\t\tif (!this.picker.is(':visible')) return;\r\n\t\t\tthis.picker.hide();\r\n\t\t\t$(window).off('resize', this.place);\r\n\t\t\tthis.viewMode = this.startViewMode;\r\n\t\t\tthis.showMode();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\t$(document).off('mousedown', this.hide);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.forceParse &&\r\n\t\t\t\t(\r\n\t\t\t\t\tthis.isInput && this.element.val() ||\r\n\t\t\t\t\tthis.hasInput && this.element.find('input').val()\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t\tthis.setValue();\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'hide',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tremove: function() {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tthis.picker.remove();\r\n\t\t\tdelete this.element.data().datepicker;\r\n\t\t},\r\n\r\n\t\tgetDate: function() {\r\n\t\t\tvar d = this.getUTCDate();\r\n\t\t\treturn new Date(d.getTime() + (d.getTimezoneOffset()*60000));\r\n\t\t},\r\n\r\n\t\tgetUTCDate: function() {\r\n\t\t\treturn this.date;\r\n\t\t},\r\n\r\n\t\tsetDate: function(d) {\r\n\t\t\tthis.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset()*60000)));\r\n\t\t},\r\n\r\n\t\tsetUTCDate: function(d) {\r\n\t\t\tthis.date = d;\r\n\t\t\tthis.setValue();\r\n\t\t},\r\n\r\n\t\tsetValue: function() {\r\n\t\t\tvar formatted = this.getFormattedDate();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\tif (this.component){\r\n\t\t\t\t\tthis.element.find('input').val(formatted);\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.data('date', formatted);\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.val(formatted);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetFormattedDate: function(format) {\r\n\t\t\tif (format === undefined)\r\n\t\t\t\tformat = this.format;\r\n\t\t\treturn DPGlobal.formatDate(this.date, format, this.language);\r\n\t\t},\r\n\r\n\t\tsetStartDate: function(startDate){\r\n\t\t\tthis.startDate = startDate||-Infinity;\r\n\t\t\tif (this.startDate !== -Infinity) {\r\n\t\t\t\tthis.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetEndDate: function(endDate){\r\n\t\t\tthis.endDate = endDate||Infinity;\r\n\t\t\tif (this.endDate !== Infinity) {\r\n\t\t\t\tthis.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetDaysOfWeekDisabled: function(daysOfWeekDisabled){\r\n\t\t\tthis.daysOfWeekDisabled = daysOfWeekDisabled||[];\r\n\t\t\tif (!$.isArray(this.daysOfWeekDisabled)) {\r\n\t\t\t\tthis.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\r\n\t\t\t}\r\n\t\t\tthis.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function (d) {\r\n\t\t\t\treturn parseInt(d, 10);\r\n\t\t\t});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tplace: function(){\r\n\t\t\t\t\t\tif(this.isInline) return;\r\n\t\t\tvar zIndex = parseInt(this.element.parents().filter(function() {\r\n\t\t\t\t\t\t\treturn $(this).css('z-index') != 'auto';\r\n\t\t\t\t\t\t}).first().css('z-index'))+10;\r\n\t\t\tvar offset = this.component ? this.component.offset() : this.element.offset();\r\n\t\t\tvar height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(true);\r\n\t\t\tthis.picker.css({\r\n\t\t\t\ttop: offset.top + height,\r\n\t\t\t\tleft: offset.left,\r\n\t\t\t\tzIndex: zIndex\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tupdate: function(){\r\n\t\t\tvar date, fromArgs = false;\r\n\t\t\tif(arguments && arguments.length && (typeof arguments[0] === 'string' || arguments[0] instanceof Date)) {\r\n\t\t\t\tdate = arguments[0];\r\n\t\t\t\tfromArgs = true;\r\n\t\t\t} else {\r\n\t\t\t\tdate = this.isInput ? this.element.val() : this.element.data('date') || this.element.find('input').val();\r\n\t\t\t}\r\n\r\n\t\t\tthis.date = DPGlobal.parseDate(date, this.format, this.language);\r\n\r\n\t\t\tif(fromArgs) this.setValue();\r\n\r\n\t\t\tif (this.date < this.startDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.startDate);\r\n\t\t\t} else if (this.date > this.endDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.endDate);\r\n\t\t\t} else {\r\n\t\t\t\tthis.viewDate = new Date(this.date);\r\n\t\t\t}\r\n\t\t\tthis.fill();\r\n\t\t},\r\n\r\n\t\tfillDow: function(){\r\n\t\t\tvar dowCnt = this.weekStart,\r\n\t\t\thtml = '<tr>';\r\n\t\t\tif(this.calendarWeeks){\r\n\t\t\t\tvar cell = '<th class=\"cw\">&nbsp;</th>';\r\n\t\t\t\thtml += cell;\r\n\t\t\t\tthis.picker.find('.datepicker-days thead tr:first-child').prepend(cell);\r\n\t\t\t}\r\n\t\t\twhile (dowCnt < this.weekStart + 7) {\r\n\t\t\t\thtml += '<th class=\"dow\">'+dates[this.language].daysMin[(dowCnt++)%7]+'</th>';\r\n\t\t\t}\r\n\t\t\thtml += '</tr>';\r\n\t\t\tthis.picker.find('.datepicker-days thead').append(html);\r\n\t\t},\r\n\r\n\t\tfillMonths: function(){\r\n\t\t\tvar html = '',\r\n\t\t\ti = 0;\r\n\t\t\twhile (i < 12) {\r\n\t\t\t\thtml += '<span class=\"month\">'+dates[this.language].monthsShort[i++]+'</span>';\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datepicker-months td').html(html);\r\n\t\t},\r\n\r\n\t\tfill: function() {\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tstartYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\r\n\t\t\t\tstartMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\r\n\t\t\t\tendYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\r\n\t\t\t\tendMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\r\n\t\t\t\tcurrentDate = this.date && this.date.valueOf(),\r\n\t\t\t\ttoday = new Date();\r\n\t\t\tthis.picker.find('.datepicker-days thead th.switch')\r\n\t\t\t\t\t\t.text(dates[this.language].months[month]+' '+year);\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t\t\t.text(dates[this.language].today)\r\n\t\t\t\t\t\t.toggle(this.todayBtn !== false);\r\n\t\t\tthis.updateNavArrows();\r\n\t\t\tthis.fillMonths();\r\n\t\t\tvar prevMonth = UTCDate(year, month-1, 28,0,0,0,0),\r\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\r\n\t\t\tprevMonth.setUTCDate(day);\r\n\t\t\tprevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7)%7);\r\n\t\t\tvar nextMonth = new Date(prevMonth);\r\n\t\t\tnextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n\t\t\tnextMonth = nextMonth.valueOf();\r\n\t\t\tvar html = [];\r\n\t\t\tvar clsName;\r\n\t\t\twhile(prevMonth.valueOf() < nextMonth) {\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekStart) {\r\n\t\t\t\t\thtml.push('<tr>');\r\n\t\t\t\t\tif(this.calendarWeeks){\r\n\t\t\t\t\t\t// ISO 8601: First week contains first thursday.\r\n\t\t\t\t\t\t// ISO also states week starts on Monday, but we can be more abstract here.\r\n\t\t\t\t\t\tvar\r\n\t\t\t\t\t\t\t// Start of current week: based on weekstart/current date\r\n\t\t\t\t\t\t\tws = new Date(+prevMonth + (this.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),\r\n\t\t\t\t\t\t\t// Thursday of this week\r\n\t\t\t\t\t\t\tth = new Date(+ws + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),\r\n\t\t\t\t\t\t\t// First Thursday of year, year from thursday\r\n\t\t\t\t\t\t\tyth = new Date(+(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay())%7*864e5),\r\n\t\t\t\t\t\t\t// Calendar week: ms between thursdays, div ms per day, div 7 days\r\n\t\t\t\t\t\t\tcalWeek =  (th - yth) / 864e5 / 7 + 1;\r\n\t\t\t\t\t\thtml.push('<td class=\"cw\">'+ calWeek +'</td>');\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tclsName = '';\r\n\t\t\t\tif (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\r\n\t\t\t\t\tclsName += ' old';\r\n\t\t\t\t} else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\r\n\t\t\t\t\tclsName += ' new';\r\n\t\t\t\t}\r\n\t\t\t\t// Compare internal UTC date with local today, not UTC today\r\n\t\t\t\tif (this.todayHighlight &&\r\n\t\t\t\t\tprevMonth.getUTCFullYear() == today.getFullYear() &&\r\n\t\t\t\t\tprevMonth.getUTCMonth() == today.getMonth() &&\r\n\t\t\t\t\tprevMonth.getUTCDate() == today.getDate()) {\r\n\t\t\t\t\tclsName += ' today';\r\n\t\t\t\t}\r\n\t\t\t\tif (currentDate && prevMonth.valueOf() == currentDate) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate ||\r\n\t\t\t\t\t$.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t}\r\n\t\t\t\thtml.push('<td class=\"day'+clsName+'\">'+prevMonth.getUTCDate() + '</td>');\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekEnd) {\r\n\t\t\t\t\thtml.push('</tr>');\r\n\t\t\t\t}\r\n\t\t\t\tprevMonth.setUTCDate(prevMonth.getUTCDate()+1);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n\t\t\tvar currentYear = this.date && this.date.getUTCFullYear();\r\n\r\n\t\t\tvar months = this.picker.find('.datepicker-months')\r\n\t\t\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t\t\t\t.text(year)\r\n\t\t\t\t\t\t\t.end()\r\n\t\t\t\t\t\t.find('span').removeClass('active');\r\n\t\t\tif (currentYear && currentYear == year) {\r\n\t\t\t\tmonths.eq(this.date.getUTCMonth()).addClass('active');\r\n\t\t\t}\r\n\t\t\tif (year < startYear || year > endYear) {\r\n\t\t\t\tmonths.addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == startYear) {\r\n\t\t\t\tmonths.slice(0, startMonth).addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == endYear) {\r\n\t\t\t\tmonths.slice(endMonth+1).addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\thtml = '';\r\n\t\t\tyear = parseInt(year/10, 10) * 10;\r\n\t\t\tvar yearCont = this.picker.find('.datepicker-years')\r\n\t\t\t\t\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t\t\t\t\t\t.text(year + '-' + (year + 9))\r\n\t\t\t\t\t\t\t\t\t.end()\r\n\t\t\t\t\t\t\t\t.find('td');\r\n\t\t\tyear -= 1;\r\n\t\t\tfor (var i = -1; i < 11; i++) {\r\n\t\t\t\thtml += '<span class=\"year'+(i == -1 || i == 10 ? ' old' : '')+(currentYear == year ? ' active' : '')+(year < startYear || year > endYear ? ' disabled' : '')+'\">'+year+'</span>';\r\n\t\t\t\tyear += 1;\r\n\t\t\t}\r\n\t\t\tyearCont.html(html);\r\n\t\t},\r\n\r\n\t\tupdateNavArrows: function() {\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth();\r\n\t\t\tswitch (this.viewMode) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclick: function(e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar target = $(e.target).closest('span, td, th');\r\n\t\t\tif (target.length == 1) {\r\n\t\t\t\tswitch(target[0].nodeName.toLowerCase()) {\r\n\t\t\t\t\tcase 'th':\r\n\t\t\t\t\t\tswitch(target[0].className) {\r\n\t\t\t\t\t\t\tcase 'switch':\r\n\t\t\t\t\t\t\t\tthis.showMode(1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'prev':\r\n\t\t\t\t\t\t\tcase 'next':\r\n\t\t\t\t\t\t\t\tvar dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1);\r\n\t\t\t\t\t\t\t\tswitch(this.viewMode){\r\n\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'today':\r\n\t\t\t\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\t\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n\r\n\t\t\t\t\t\t\t\tthis.showMode(-2);\r\n\t\t\t\t\t\t\t\tvar which = this.todayBtn == 'linked' ? null : 'view';\r\n\t\t\t\t\t\t\t\tthis._setDate(date, which);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'span':\r\n\t\t\t\t\t\tif (!target.is('.disabled')) {\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\tif (target.is('.month')) {\r\n\t\t\t\t\t\t\t\tvar month = target.parent().find('span').index(target);\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeMonth',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar year = parseInt(target.text(), 10)||0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeYear',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'td':\r\n\t\t\t\t\t\tif (target.is('.day') && !target.is('.disabled')){\r\n\t\t\t\t\t\t\tvar day = parseInt(target.text(), 10)||1;\r\n\t\t\t\t\t\t\tvar year = this.viewDate.getUTCFullYear(),\r\n\t\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth();\r\n\t\t\t\t\t\t\tif (target.is('.old')) {\r\n\t\t\t\t\t\t\t\tif (month === 0) {\r\n\t\t\t\t\t\t\t\t\tmonth = 11;\r\n\t\t\t\t\t\t\t\t\tyear -= 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth -= 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.new')) {\r\n\t\t\t\t\t\t\t\tif (month == 11) {\r\n\t\t\t\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t\t\t\t\tyear += 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day,0,0,0,0));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDate: function(date, which){\r\n\t\t\tif (!which || which == 'date')\r\n\t\t\t\tthis.date = date;\r\n\t\t\tif (!which || which  == 'view')\r\n\t\t\t\tthis.viewDate = date;\r\n\t\t\tthis.fill();\r\n\t\t\tthis.setValue();\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'changeDate',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\telement = this.element;\r\n\t\t\t} else if (this.component){\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element) {\r\n\t\t\t\telement.change();\r\n\t\t\t\tif (this.autoclose && (!which || which == 'date')) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmoveMonth: function(date, dir){\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf()),\r\n\t\t\t\tday = new_date.getUTCDate(),\r\n\t\t\t\tmonth = new_date.getUTCMonth(),\r\n\t\t\t\tmag = Math.abs(dir),\r\n\t\t\t\tnew_month, test;\r\n\t\t\tdir = dir > 0 ? 1 : -1;\r\n\t\t\tif (mag == 1){\r\n\t\t\t\ttest = dir == -1\r\n\t\t\t\t\t// If going back one month, make sure month is not current month\r\n\t\t\t\t\t// (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t? function(){ return new_date.getUTCMonth() == month; }\r\n\t\t\t\t\t// If going forward one month, make sure month is as expected\r\n\t\t\t\t\t// (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t: function(){ return new_date.getUTCMonth() != new_month; };\r\n\t\t\t\tnew_month = month + dir;\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t\t// Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n\t\t\t\tif (new_month < 0 || new_month > 11)\r\n\t\t\t\t\tnew_month = (new_month + 12) % 12;\r\n\t\t\t} else {\r\n\t\t\t\t// For magnitudes >1, move one month at a time...\r\n\t\t\t\tfor (var i=0; i<mag; i++)\r\n\t\t\t\t\t// ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n\t\t\t\t\tnew_date = this.moveMonth(new_date, dir);\r\n\t\t\t\t// ...then reset the day, keeping it in the new month\r\n\t\t\t\tnew_month = new_date.getUTCMonth();\r\n\t\t\t\tnew_date.setUTCDate(day);\r\n\t\t\t\ttest = function(){ return new_month != new_date.getUTCMonth(); };\r\n\t\t\t}\r\n\t\t\t// Common date-resetting loop -- if date is beyond end of month, make it\r\n\t\t\t// end of month\r\n\t\t\twhile (test()){\r\n\t\t\t\tnew_date.setUTCDate(--day);\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t}\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveYear: function(date, dir){\r\n\t\t\treturn this.moveMonth(date, dir*12);\r\n\t\t},\r\n\r\n\t\tdateWithinRange: function(date){\r\n\t\t\treturn date >= this.startDate && date <= this.endDate;\r\n\t\t},\r\n\r\n\t\tkeydown: function(e){\r\n\t\t\tif (this.picker.is(':not(:visible)')){\r\n\t\t\t\tif (e.keyCode == 27) // allow escape to hide and re-show picker\r\n\t\t\t\t\tthis.show();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar dateChanged = false,\r\n\t\t\t\tdir, day, month,\r\n\t\t\t\tnewDate, newViewDate;\r\n\t\t\tswitch(e.keyCode){\r\n\t\t\t\tcase 27: // escape\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: // left\r\n\t\t\t\tcase 39: // right\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 37 ? -1 : 1;\r\n\t\t\t\t\tif (e.ctrlKey){\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (e.shiftKey){\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewDate = new Date(this.date);\r\n\t\t\t\t\t\tnewDate.setUTCDate(this.date.getUTCDate() + dir);\r\n\t\t\t\t\t\tnewViewDate = new Date(this.viewDate);\r\n\t\t\t\t\t\tnewViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)){\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: // up\r\n\t\t\t\tcase 40: // down\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 38 ? -1 : 1;\r\n\t\t\t\t\tif (e.ctrlKey){\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (e.shiftKey){\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewDate = new Date(this.date);\r\n\t\t\t\t\t\tnewDate.setUTCDate(this.date.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\tnewViewDate = new Date(this.viewDate);\r\n\t\t\t\t\t\tnewViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)){\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 13: // enter\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9: // tab\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dateChanged){\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype: 'changeDate',\r\n\t\t\t\t\tdate: this.date\r\n\t\t\t\t});\r\n\t\t\t\tvar element;\r\n\t\t\t\tif (this.isInput) {\r\n\t\t\t\t\telement = this.element;\r\n\t\t\t\t} else if (this.component){\r\n\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\telement.change();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshowMode: function(dir) {\r\n\t\t\tif (dir) {\r\n\t\t\t\tthis.viewMode = Math.max(0, Math.min(2, this.viewMode + dir));\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t\tvitalets: fixing bug of very special conditions:\r\n\t\t\t\tjquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\r\n\t\t\t\tMethod show() does not set display css correctly and datepicker is not shown.\r\n\t\t\t\tChanged to .css('display', 'block') solve the problem.\r\n\t\t\t\tSee https://github.com/vitalets/x-editable/issues/37\r\n\r\n\t\t\t\tIn jquery 1.7.2+ everything works fine.\r\n\t\t\t*/\r\n\t\t\t//this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n\t\t\tthis.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display', 'block');\r\n\t\t\tthis.updateNavArrows();\r\n\t\t}\r\n\t};\r\n\r\n\t$.fn.datepicker = function ( option ) {\r\n\t\tvar args = Array.apply(null, arguments);\r\n\t\targs.shift();\r\n\t\treturn this.each(function () {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $this.data('datepicker'),\r\n\t\t\t\toptions = typeof option == 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));\r\n\t\t\t}\r\n\t\t\tif (typeof option == 'string' && typeof data[option] == 'function') {\r\n\t\t\t\tdata[option].apply(data, args);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.datepicker.defaults = {\r\n\t};\r\n\t$.fn.datepicker.Constructor = Datepicker;\r\n\tvar dates = $.fn.datepicker.dates = {\r\n\t\ten: {\r\n\t\t\tdays: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n\t\t    daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n\t\t    daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n\t\t    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t    monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t    today: \"Today\"\r\n\t\t}\r\n\t};\r\n\r\n\tvar DPGlobal = {\r\n\t\tmodes: [\r\n\t\t\t{\r\n\t\t\t\tclsName: 'days',\r\n\t\t\t\tnavFnc: 'Month',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'months',\r\n\t\t\t\tnavFnc: 'FullYear',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'years',\r\n\t\t\t\tnavFnc: 'FullYear',\r\n\t\t\t\tnavStep: 10\r\n\t\t}],\r\n\t\tisLeapYear: function (year) {\r\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\r\n\t\t},\r\n\t\tgetDaysInMonth: function (year, month) {\r\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\r\n\t\t},\r\n\t\tvalidParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,\r\n\t\tnonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\r\n\t\tparseFormat: function(format){\r\n\t\t\t// IE treats \\0 as a string end in inputs (truncating the value),\r\n\t\t\t// so it's a bad format delimiter, anyway\r\n\t\t\tvar separators = format.replace(this.validParts, '\\0').split('\\0'),\r\n\t\t\t\tparts = format.match(this.validParts);\r\n\t\t\tif (!separators || !separators.length || !parts || parts.length === 0){\r\n\t\t\t\tthrow new Error(\"Invalid date format.\");\r\n\t\t\t}\r\n\t\t\treturn {separators: separators, parts: parts};\r\n\t\t},\r\n\t\tparseDate: function(date, format, language) {\r\n\t\t\tif (date instanceof Date) return date;\r\n\t\t\tif (/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(date)) {\r\n\t\t\t\tvar part_re = /([\\-+]\\d+)([dmwy])/,\r\n\t\t\t\t\tparts = date.match(/([\\-+]\\d+)([dmwy])/g),\r\n\t\t\t\t\tpart, dir;\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfor (var i=0; i<parts.length; i++) {\r\n\t\t\t\t\tpart = part_re.exec(parts[i]);\r\n\t\t\t\t\tdir = parseInt(part[1]);\r\n\t\t\t\t\tswitch(part[2]){\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'w':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);\r\n\t\t\t}\r\n\t\t\tvar parts = date && date.match(this.nonpunctuation) || [],\r\n\t\t\t\tdate = new Date(),\r\n\t\t\t\tparsed = {},\r\n\t\t\t\tsetters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],\r\n\t\t\t\tsetters_map = {\r\n\t\t\t\t\tyyyy: function(d,v){ return d.setUTCFullYear(v); },\r\n\t\t\t\t\tyy: function(d,v){ return d.setUTCFullYear(2000+v); },\r\n\t\t\t\t\tm: function(d,v){\r\n\t\t\t\t\t\tv -= 1;\r\n\t\t\t\t\t\twhile (v<0) v += 12;\r\n\t\t\t\t\t\tv %= 12;\r\n\t\t\t\t\t\td.setUTCMonth(v);\r\n\t\t\t\t\t\twhile (d.getUTCMonth() != v)\r\n\t\t\t\t\t\t\td.setUTCDate(d.getUTCDate()-1);\r\n\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t},\r\n\t\t\t\t\td: function(d,v){ return d.setUTCDate(v); }\r\n\t\t\t\t},\r\n\t\t\t\tval, filtered, part;\r\n\t\t\tsetters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n\t\t\tsetters_map['dd'] = setters_map['d'];\r\n\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n\t\t\tvar fparts = format.parts.slice();\r\n\t\t\t// Remove noop parts\r\n\t\t\tif (parts.length != fparts.length) {\r\n\t\t\t\tfparts = $(fparts).filter(function(i,p){\r\n\t\t\t\t\treturn $.inArray(p, setters_order) !== -1;\r\n\t\t\t\t}).toArray();\r\n\t\t\t}\r\n\t\t\t// Process remainder\r\n\t\t\tif (parts.length == fparts.length) {\r\n\t\t\t\tfor (var i=0, cnt = fparts.length; i < cnt; i++) {\r\n\t\t\t\t\tval = parseInt(parts[i], 10);\r\n\t\t\t\t\tpart = fparts[i];\r\n\t\t\t\t\tif (isNaN(val)) {\r\n\t\t\t\t\t\tswitch(part) {\r\n\t\t\t\t\t\t\tcase 'MM':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].months).filter(function(){\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m == p;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].months) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].monthsShort).filter(function(){\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m == p;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparsed[part] = val;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0, s; i<setters_order.length; i++){\r\n\t\t\t\t\ts = setters_order[i];\r\n\t\t\t\t\tif (s in parsed && !isNaN(parsed[s]))\r\n\t\t\t\t\t\tsetters_map[s](date, parsed[s]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tformatDate: function(date, format, language){\r\n\t\t\tvar val = {\r\n\t\t\t\td: date.getUTCDate(),\r\n\t\t\t\tD: dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\tDD: dates[language].days[date.getUTCDay()],\r\n\t\t\t\tm: date.getUTCMonth() + 1,\r\n\t\t\t\tM: dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\tMM: dates[language].months[date.getUTCMonth()],\r\n\t\t\t\tyy: date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\tyyyy: date.getUTCFullYear()\r\n\t\t\t};\r\n\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\r\n\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\r\n\t\t\tvar date = [],\r\n\t\t\t\tseps = $.extend([], format.separators);\r\n\t\t\tfor (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n\t\t\t\tif (seps.length)\r\n\t\t\t\t\tdate.push(seps.shift());\r\n\t\t\t\tdate.push(val[format.parts[i]]);\r\n\t\t\t}\r\n\t\t\treturn date.join('');\r\n\t\t},\r\n\t\theadTemplate: '<thead>'+\r\n\t\t\t\t\t\t\t'<tr>'+\r\n\t\t\t\t\t\t\t\t'<th class=\"prev\"><i class=\"fa fa-arrow-left\"/></th>'+\r\n\t\t\t\t\t\t\t\t'<th colspan=\"5\" class=\"switch\"></th>'+\r\n\t\t\t\t\t\t\t\t'<th class=\"next\"><i class=\"fa fa-arrow-right\"/></th>'+\r\n\t\t\t\t\t\t\t'</tr>'+\r\n\t\t\t\t\t\t'</thead>',\r\n\t\tcontTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n\t\tfootTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\r\n\t};\r\n\tDPGlobal.template = '<div class=\"datepicker\">'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-days\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\" table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\t'<tbody></tbody>'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-months\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-years\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t'</div>';\r\n\r\n\t$.fn.datepicker.DPGlobal = DPGlobal;\r\n\r\n}( window.jQuery );\r\n","(function(root, factory) {\r\n    if(typeof exports === 'object') {\r\n        module.exports = factory(require('moment'));\r\n    }\r\n    else if(typeof define === 'function' && define.amd) {\r\n        define('moment-range', ['moment'], factory);\r\n    }\r\n    else {\r\n        root.moment = factory(root.moment);\r\n    }\r\n}(this, function(moment) {\r\n    var DateRange, INTERVALS;\r\n\r\n    INTERVALS = {\r\n        year: true,\r\n        month: true,\r\n        week: true,\r\n        day: true,\r\n        hour: true,\r\n        minute: true,\r\n        second: true\r\n    };\r\n\r\n    /**\r\n     * DateRange class to store ranges and query dates.\r\n     * @typedef {!Object}\r\n     *\r\n     */\r\n\r\n\r\n    DateRange = (function() {\r\n        /**\r\n         * DateRange instance.\r\n         * @param {(Moment|Date)} start Start of interval.\r\n         * @param {(Moment|Date)} end   End of interval.\r\n         * @constructor\r\n         *\r\n         */\r\n\r\n        function DateRange(start, end) {\r\n            this.start = moment(start);\r\n            this.end = moment(end);\r\n        }\r\n\r\n        /**\r\n         * Determine if the current interval contains a given moment/date/range.\r\n         * @param {(Moment|Date|DateRange)} other Date to check.\r\n         * @return {!boolean}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.contains = function(other) {\r\n            if (other instanceof DateRange) {\r\n                return this.start <= other.start && this.end >= other.end;\r\n            } else {\r\n                return (this.start <= other && other <= this.end);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @private\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype._by_string = function(interval, hollaback) {\r\n            var current, _results;\r\n            current = moment(this.start);\r\n            _results = [];\r\n            while (this.contains(current)) {\r\n                hollaback.call(this, current.clone());\r\n                _results.push(current.add(interval, 1));\r\n            }\r\n            return _results;\r\n        };\r\n\r\n        /**\r\n         * @private\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype._by_range = function(range_interval, hollaback) {\r\n            var i, l, _i, _results;\r\n            l = Math.round(this / range_interval);\r\n            if (l === Infinity) {\r\n                return this;\r\n            }\r\n            _results = [];\r\n            for (i = _i = 0; 0 <= l ? _i <= l : _i >= l; i = 0 <= l ? ++_i : --_i) {\r\n                _results.push(hollaback.call(this, moment(this.start.valueOf() + range_interval.valueOf() * i)));\r\n            }\r\n            return _results;\r\n        };\r\n\r\n        /**\r\n         * Determine if the current date range overlaps a given date range.\r\n         * @param {!DateRange} range Date range to check.\r\n         * @return {!boolean}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.overlaps = function(range) {\r\n            return this.intersect(range) !== null;\r\n        };\r\n\r\n        /**\r\n         * Determine the intersecting periods from one or more date ranges.\r\n         * @param {!DateRange} other A date range to intersect with this one.\r\n         * @return {!DateRange|null}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.intersect = function(other) {\r\n            var _ref, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;\r\n            if (((this.start <= (_ref1 = other.start) && _ref1 < (_ref = this.end)) && _ref < other.end)) {\r\n                return new DateRange(other.start, this.end);\r\n            } else if (((other.start < (_ref3 = this.start) && _ref3 < (_ref2 = other.end)) && _ref2 <= this.end)) {\r\n                return new DateRange(this.start, other.end);\r\n            } else if (((other.start < (_ref5 = this.start) && _ref5 < (_ref4 = this.end)) && _ref4 < other.end)) {\r\n                return this;\r\n            } else if (((this.start <= (_ref7 = other.start) && _ref7 < (_ref6 = other.end)) && _ref6 <= this.end)) {\r\n                return other;\r\n            } else {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Subtract one range from another.\r\n         * @param {!DateRange} other A date range to substract from this one.\r\n         * @return {!DateRange[]}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.subtract = function(other) {\r\n            var _ref, _ref1, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;\r\n            if (this.intersect(other) === null) {\r\n                return [this];\r\n            } else if (((other.start <= (_ref1 = this.start) && _ref1 < (_ref = this.end)) && _ref <= other.end)) {\r\n                return [];\r\n            } else if (((other.start <= (_ref3 = this.start) && _ref3 < (_ref2 = other.end)) && _ref2 < this.end)) {\r\n                return [new DateRange(other.end, this.end)];\r\n            } else if (((this.start < (_ref5 = other.start) && _ref5 < (_ref4 = this.end)) && _ref4 <= other.end)) {\r\n                return [new DateRange(this.start, other.start)];\r\n            } else if (((this.start < (_ref7 = other.start) && _ref7 < (_ref6 = other.end)) && _ref6 < this.end)) {\r\n                return [new DateRange(this.start, other.start), new DateRange(other.end, this.end)];\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Iterate over the date range by a given date range, executing a function\r\n         * for each sub-range.\r\n         * @param {!DateRange|String} range     Date range to be used for iteration\r\n         *                                      or shorthand string (shorthands:\r\n         *                                      http://momentjs.com/docs/#/manipulating/add/)\r\n         * @param {!function(Moment)} hollaback Function to execute for each sub-range.\r\n         * @return {!boolean}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.by = function(range, hollaback) {\r\n            if (typeof range === 'string') {\r\n                this._by_string(range, hollaback);\r\n            } else {\r\n                this._by_range(range, hollaback);\r\n            }\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * Date range in milliseconds. Allows basic coercion math of date ranges.\r\n         * @return {!number}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.valueOf = function() {\r\n            return this.end - this.start;\r\n        };\r\n\r\n        /**\r\n         * Date range toDate\r\n         * @return  {!Array}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.toDate = function() {\r\n            return [this.start.toDate(), this.end.toDate()];\r\n        };\r\n\r\n        /**\r\n         * Determine if this date range is the same as another.\r\n         * @param {!DateRange} other Another date range to compare to.\r\n         * @return {!boolean}\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.isSame = function(other) {\r\n            return this.start.isSame(other.start) && this.end.isSame(other.end);\r\n        };\r\n\r\n        /**\r\n         * Return the difference of the end vs start.\r\n         *   - To get the difference in milliseconds, use range#diff\r\n         *   - To get the difference in another unit of measurement, pass that measurement as the second argument.\r\n         * @return milliseconds if no measure is passed in, otherwise an increment of measure\r\n         *\r\n         */\r\n\r\n\r\n        DateRange.prototype.diff = function(unit) {\r\n            if (unit == null) {\r\n                unit = void 0;\r\n            }\r\n            return this.end.diff(this.start, unit);\r\n        };\r\n\r\n        /**\r\n         * Clones the current DateRange\r\n         * @returns {DateRange}\r\n         */\r\n        DateRange.prototype.clone = function() {\r\n            return new DateRange(this.start.clone(), this.end.clone());\r\n        };\r\n\r\n        return DateRange;\r\n\r\n    })();\r\n\r\n    /**\r\n     * Build a date range.\r\n     * @param {(Moment|Date)} start Start of range.\r\n     * @param {(Moment|Date)} end   End of range.\r\n     * @this {Moment}\r\n     * @return {!DateRange}\r\n     *\r\n     */\r\n\r\n\r\n    moment.fn.range = function(start, end) {\r\n        if (start in INTERVALS) {\r\n            return new DateRange(moment(this).startOf(start), moment(this).endOf(start));\r\n        } else {\r\n            return new DateRange(start, end);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Build a date range.\r\n     * @param {(Moment|Date)} start Start of range.\r\n     * @param {(Moment|Date)} end   End of range.\r\n     * @this {Moment}\r\n     * @return {!DateRange}\r\n     *\r\n     */\r\n\r\n\r\n    moment.range = function(start, end) {\r\n        return new DateRange(start, end);\r\n    };\r\n\r\n    /**\r\n     * Check if the current moment is within a given date range.\r\n     * @param {!DateRange} range Date range to check.\r\n     * @this {Moment}\r\n     * @return {!boolean}\r\n     *\r\n     */\r\n\r\n\r\n    moment.fn.within = function(range) {\r\n        return range.contains(this._d);\r\n    };\r\n\r\n    return moment;\r\n}));","function ViewRosterViewModel() {\r\n    //Data\r\n    var self = this;\r\n    self.selected_team = ko.observable(1);\r\n\r\n    self.number_of_days = ko.observable(7);\r\n\r\n    self.roster_requested = ko.observable(false);\r\n\r\n    self.teams = ko.observableArray([]);\r\n\r\n    self.roster = ko.observable();\r\n\r\n    self.team_members = ko.observableArray([]);\r\n\r\n    self.roster_found = ko.observable(false);\r\n\r\n    self.curr_date = ko.observable(moment().format('YYYY-MM-DD'));\r\n\r\n    self.is_manager = ko.observable(false);\r\n\r\n    self.datepicker_date = ko.observable($('#roster_date'));\r\n\r\n    self.roster_dates = function (offset) {\r\n        return moment(self.curr_date(), 'YYYY-MM-DD').isoWeekday(offset).format('ddd, Do MMM');\r\n    }.bind(self);\r\n\r\n    self.getRosterHrefForEdit = ko.computed(function () {\r\n        if (typeof self.selected_team() === 'object') {\r\n            return \"edit_roster?team_id=\" + self.selected_team().team_id() + \"&date=\" + self.curr_date();\r\n        } else {\r\n            return \"edit_roster\";\r\n        }\r\n    }).extend({notify: 'always'});\r\n    self.cloneRosterAjax = function () {\r\n        //making ajax call with data [roster, teamembers]\r\n    }\r\n    self.total_hours = ko.computed({\r\n        read: function () {\r\n            var total = 0;\r\n            $.each(self.team_members(), function (key, val) {\r\n                total += val().total_hours();\r\n            });\r\n            return Math.round(total * Math.pow(10, 2)) / Math.pow(10, 2);\r\n        },\r\n        owner: this\r\n    });\r\n    if (self.is_manager) {\r\n        self.total_cost = ko.computed({\r\n            read: function () {\r\n                var total = 0;\r\n                $.each(self.team_members(), function (key, val) {\r\n                    total += val().employee_cost();\r\n                });\r\n                return Math.round(total * Math.pow(10, 0)) / Math.pow(10, 0);\r\n            },\r\n            owner: this\r\n        });\r\n\r\n        self.daily_cost = function (offset) {\r\n            var total = 0;\r\n            $.each(self.team_members(), function (key, val) {\r\n                if (typeof val().shifts()[offset] !== undefined) {\r\n\r\n                    (val().shifts()[offset].shift_length() < 5) ? total += val().shifts()[offset].shift_length() * val().pay_rate() : total += (val().shifts()[offset].shift_length() - 0.5) * val().pay_rate();\r\n                }\r\n            });\r\n            if (offset == 5) {\r\n                total *= 1.25;\r\n            } else if (offset == 6) {\r\n                total *= 1.5;\r\n            }\r\n            return Math.round(total * Math.pow(10, 0)) / Math.pow(10, 0);\r\n        }.bind(self);\r\n    }\r\n\r\n    self.daily_hours = function (offset) {\r\n        var total = 0;\r\n        $.each(self.team_members(), function (key, val) {\r\n            if (typeof val().shifts()[offset] !== undefined) {\r\n                (val().shifts()[offset].shift_length() < 5) ? total += Number(val().shifts()[offset].shift_length()) : total += (Number(val().shifts()[offset].shift_length()) - 0.5);\r\n            }\r\n        });\r\n        return Math.round(total * Math.pow(10, 2)) / Math.pow(10, 2);\r\n    }.bind(self);\r\n\r\n\r\n    self.error_modal = {\r\n        error_message: ko.observable(),\r\n        error_code: ko.observable(),\r\n        show: ko.observable(false), /* Set to true to show initially */\r\n        body: ko.observable(),\r\n        header: ko.observable(),\r\n        onClose: function () {\r\n\r\n        }\r\n    }\r\n\r\n    self.showErrorModal = function (error_message, error_code) {\r\n        self.error_modal.show(true);\r\n        self.error_modal.error_message(error_message);\r\n        self.error_modal.error_code(error_code);\r\n\r\n        if (error_code < 500) {\r\n            self.error_modal.header(\"Notice\");\r\n            self.error_modal.body(\"Please Note:\");\r\n        } else if (error_code < 1000) {\r\n            self.error_modal.header(\"Warning\");\r\n            self.error_modal.body(\"Warning:\");\r\n        } else if (error_code < 1500) {\r\n            self.error_modal.header(\"Error\");\r\n            self.error_modal.body(\"The application has encountered an error:\");\r\n        } else {\r\n            self.error_modal.header(\"Fatal Error\");\r\n            self.error_modal.body(\"The application has encountered a fatal error:\");\r\n        }\r\n    };\r\n\r\n    self.prevWeek = function () {\r\n        self.curr_date(moment(self.curr_date(), \"YYYY-MM-DD\").add(-1, 'w').format(\"YYYY-MM-DD\"));\r\n        self.getRoster();\r\n    };\r\n    self.nextWeek = function () {\r\n        self.curr_date(moment(self.curr_date(), \"YYYY-MM-DD\").add(1, 'w').format(\"YYYY-MM-DD\"));\r\n        self.getRoster();\r\n    };\r\n\r\n    //Sending/Receiving Data\r\n    $.getJSON(\"team/organisation-teams\", function (allData) {\r\n        self.selected_team(allData.userteam);\r\n        var mappedTeams = $.map(allData.teams, function (val, key) {\r\n            return new Team(val, key)\r\n        });\r\n        self.teams(mappedTeams);\r\n        if ($.urlParam('date') != null && $.urlParam('team_id') != null) {\r\n            if (moment($.urlParam('date'), 'YYYY-MM-DD').isValid()) {\r\n                $.each(self.teams(), function (key, val) {\r\n                    if (val.team_id() === $.urlParam('team_id')) {\r\n                        self.curr_date($.urlParam('date'));\r\n                        self.selected_team(val);\r\n                        self.getRoster();\r\n                        return false;\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            $.each(self.teams(), function (key, val) {\r\n                if (val.team_id() == $('#team_id').text()) {\r\n                    self.selected_team(val);\r\n                    self.getRoster();\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    self.getRoster = function () {\r\n        self.roster_found(false);\r\n        self.team_members.removeAll();\r\n        self.roster_requested(true);\r\n        var data = {team_id: self.selected_team().team_id(), date: $('#roster_date').val()};\r\n        self.sendTeamIdToAng();\r\n        $.getJSON(\"roster/roster\", data, function (allData) {\r\n            self.team_members.removeAll();\r\n            if (allData['result'] == 0) {\r\n                self.roster(new Roster(allData.data.roster));\r\n                self.roster_found(true);\r\n\r\n                $.each(allData.data.team_members, function (user_key, user_value) {\r\n                    var shifts = [];\r\n\r\n                    $.each(allData.data.shifts, function (shift_key, shift_value) {\r\n                        if (shift_value.user_id == user_value.id) {\r\n                            shifts[shift_key] = shift_value;\r\n                        }\r\n                    });\r\n                    self.team_members.push(ko.observable(new Employee(user_value, shifts, self.roster())));\r\n                    self.is_manager(allData.data.is_manager);\r\n\r\n                });\r\n                history.pushState({}, null, \"view_roster?team_id=\" + self.selected_team().team_id() + \"&date=\" + $('#roster_date').val());\r\n                if (tour._inited)\r\n                    tour.goTo(tour.getCurrentStep());\r\n            } else if (allData['result'] == 520) {\r\n                $.each(allData.data.team_members, function (user_key, user_value) {\r\n                    var shifts = new Array();\r\n                    self.team_members.push(ko.observable(new Employee(user_value, shifts, self.roster())));\r\n                    self.is_manager(allData.data.is_manager);\r\n                });\r\n                if (tour._inited)\r\n                    tour.goTo(tour.getCurrentStep());\r\n            } else {\r\n                self.showErrorModal(allData['message'], allData['result']);\r\n            }\r\n\r\n            self.roster_requested(false);\r\n        });\r\n    };\r\n    self.cloneRosterToNextWeek = function () {\r\n        //self.newRoster = ko.toJSON(self.roster());\r\n        var data = {\r\n            roster: self.roster(),\r\n            team_members: self.team_members()\r\n        }\r\n        var jsonData = ko.toJSON(data);\r\n        $.post(\r\n            \"/clone_roster\",\r\n            {data: jsonData},\r\n            function (returnedData) {\r\n                if (returnedData.message == 'Success') {\r\n                    swal(\"Done\", \"Roster has been cloned to the next week\", \"success\");\r\n                } else if (returnedData.message == 'Roster existed') {\r\n                    //self.showErrorModal(returnedData['result'], returnedData['message']);\r\n                    swal({\r\n                        title: \"Are you sure?\",\r\n                        text: \"It appears you already have shift information for next week, would you like to over-ride it?\",\r\n                        type: \"warning\",\r\n                        showCancelButton: true,\r\n                        confirmButtonColor: \"#DD6B55\",\r\n                        confirmButtonText: \"Yes\",\r\n                        closeOnConfirm: false\r\n                    }, function () {\r\n                        var data = {\r\n                            roster: self.roster(),\r\n                            team_members: self.team_members(),\r\n                            is_confirmed_overwrite: true\r\n                        };\r\n                        var jsonData = ko.toJSON(data);\r\n                        $.post(\r\n                            \"/clone_roster\",\r\n                            {data: jsonData},\r\n                            function (returnedData) {\r\n                                if (returnedData.message == 'Success') {\r\n                                    swal(\"Done\", \"Roster has been cloned to the next week\", \"success\");\r\n                                } else {\r\n\r\n                                }\r\n                            });\r\n                    });\r\n                }\r\n            });\r\n    }\r\n    self.sendTeamIdToAng = function(){\r\n        var $scope = angular.element($(\"#angularContainer\")[0]).scope();\r\n        $scope.$apply(function(){\r\n            $scope.selectedTeamId = self.selected_team().team_id();\r\n        });\r\n        $scope.$digest();\r\n    }\r\n}\r\n\r\nfunction Team(val, key) {\r\n    this.team_id = ko.observable(key);\r\n    this.team_name = ko.observable(val);\r\n\r\n}\r\n\r\nfunction Roster(roster) {\r\n    this.id = ko.observable(roster.id);\r\n    this.date_start = ko.observable(roster.date_start);\r\n    this.date_ending = ko.observable(roster.date_ending);\r\n    this.roster_stage = ko.observable(roster.roster_stage);\r\n}\r\n\r\nfunction Employee(user, json_shifts, roster) {\r\n    this.user_id = ko.observable(user.id);\r\n    this.first_name = ko.observable(user.first_name);\r\n    this.last_name = ko.observable(user.last_name);\r\n    this.full_name = ko.observable(this.first_name() + \" \" + this.last_name());\r\n    this.email = ko.observable(user.email);\r\n    this.shifts = ko.observableArray(new Array(new Shift(this), new Shift(this), new Shift(this), new Shift(this), new Shift(this), new Shift(this), new Shift(this)));\r\n    this.availabilities = ko.observableArray(new Array(new Availability(), new Availability(), new Availability(), new Availability(), new Availability(), new Availability(), new Availability()));\r\n    this.gravatar_address = ko.observable('//www.gravatar.com/avatar/' + md5(this.email()) + '?s=30&d=retro');\r\n\r\n    if (user.payrate != undefined) {\r\n        if (user.payrate.length != 0) {\r\n            this.pay_rate = ko.observable(Math.round(user.payrate[0].pay_rate * 100) / 100);\r\n        } else {\r\n            this.pay_rate = ko.observable(0);\r\n        }\r\n    } else {\r\n        this.pay_rate = ko.observable(0);\r\n    }\r\n\r\n    parent = this;\r\n\r\n    this.total_hours = ko.computed({\r\n        read: function () {\r\n            var total = 0;\r\n            $.each(this.shifts(), function (key, val) {\r\n                if (val.shift_length() >= 5) {\r\n                    total += val.shift_length() - 0.5;\r\n                } else if (val.shift_length() != \"\") {\r\n                    total += val.shift_length();\r\n                }\r\n            });\r\n            return Math.round(total * Math.pow(10, 2)) / Math.pow(10, 2);\r\n        },\r\n        owner: this\r\n    });\r\n\r\n    this.employee_cost = ko.computed({\r\n        read: function () {\r\n            var saturday = 0.25 * this.shifts()[5].shift_length() * this.pay_rate();\r\n            var sunday = 0.5 * this.shifts()[6].shift_length() * this.pay_rate();\r\n            return Math.round((this.total_hours() * this.pay_rate() + saturday + sunday) * Math.pow(10, 0)) / Math.pow(10, 0);\r\n        }, owner: this\r\n    });\r\n\r\n    $.each(this.shifts(), function (key, val) {\r\n        val.setDateFromArray(key + 1, roster);\r\n    });\r\n\r\n    $.each(this.availabilities(), function (key, val) {\r\n        val.setDateFromArray(key + 1, roster);\r\n\r\n        $.each(user.availgeneral, function (k, v) {\r\n            if (v.day == val.weekday()) {\r\n                val.general_start_time(moment(v.start_time, \"HH:mm:ss\"));\r\n                val.general_end_time(moment(v.end_time, \"HH:mm:ss\"));\r\n            }\r\n        });\r\n    });\r\n\r\n    $.each(user.availspecific, function (key, val) {\r\n        if (val.all_day == true) {\r\n            var leave_dates = moment().range(moment(val.start_date, \"YYYY-MM-DD\"), moment(val.end_date, \"YYYY-MM-DD\"));\r\n\r\n            $.each(parent.availabilities(), function (k, v) {\r\n                if (v.date().within(leave_dates)) {\r\n                    v.leave_all_day(true);\r\n                }\r\n            });\r\n        } else {\r\n            var avail = parent.availabilities()[moment(val.start_date, \"YYYY-MM-DD\").format(\"E\") - 1];\r\n            avail.times.push(moment().range(moment(val.start_time, \"HH:mm:ss\"), moment(val.end_time, \"HH:mm:ss\")));\r\n        }\r\n    });\r\n\r\n    $.each(json_shifts, function (key, val) {\r\n        if (typeof val !== 'undefined') {\r\n            parent.shifts()[moment(val.rostered_start_time).isoWeekday() - 1].addShift(val);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nEmployee.prototype.toJSON = function () {\r\n    return {\r\n        user_id: this.user_id,\r\n        first_name: this.first_name,\r\n        last_name: this.last_name,\r\n        email: this.email,\r\n        shifts: this.shifts\r\n    };\r\n};\r\n\r\nfunction Shift(parent_user) {\r\n    this.shift_id = ko.observable(\"\");\r\n    this.roster_id = ko.observable(\"\");\r\n    this.date = ko.observable(\"\");\r\n    this.rostered_start_time = ko.observable(\"\");\r\n    this.rostered_end_time = ko.observable(\"\");\r\n    this.notes = ko.observable(\"\");\r\n    this.parent_user = parent_user;\r\n\r\n    this.shift_length = ko.computed({\r\n        read: function () {\r\n            if (this.rostered_start_time() == \"\" || this.rostered_end_time() == \"\") {\r\n                return \"\";\r\n            } else {\r\n                return moment(this.rostered_end_time(), 'YYYY-MM-DD HH:mm:ss').diff(moment(this.rostered_start_time(), 'YYYY-MM-DD HH:mm:ss'), 'hours', true);\r\n            }\r\n        },\r\n        owner: this\r\n    })\r\n\r\n    this.formatted_start_time = ko.computed({\r\n        read: function () {\r\n            if (this.rostered_start_time() == \"\") {\r\n                return \"\";\r\n            } else {\r\n                return moment(this.rostered_start_time()).format('H:mm');\r\n            }\r\n        },\r\n\r\n        owner: this\r\n    });\r\n\r\n    this.formatted_end_time = ko.computed({\r\n        read: function () {\r\n            if (this.rostered_end_time() == \"\") {\r\n                return \"\";\r\n            } else {\r\n                return moment(this.rostered_end_time()).format('H:mm');\r\n            }\r\n        },\r\n        owner: this\r\n    });\r\n    return this;\r\n}\r\n\r\nShift.prototype.toJSON = function () {\r\n    if (this.shift_id == \"\" && this.rostered_start_time == \"\" && this.rostered_end_time == \"\") {\r\n        return;\r\n    } else if (this.rostered_start_time == \"\" && this.rostered_end_time == \"\") {\r\n        return {shift_id: this.shift_id, destroy: true};\r\n    } else {\r\n        return {\r\n            shift_id: this.shift_id,\r\n            roster_id: this.roster_id,\r\n            date: this.date,\r\n            rostered_start_time: this.rostered_start_time,\r\n            rostered_end_time: this.rostered_end_time,\r\n            notes: this.notes\r\n        };\r\n    }\r\n};\r\n\r\nShift.prototype.addShift = function (shift) {\r\n    this.shift_id(shift.id);\r\n    this.roster_id(shift.roster_id);\r\n    this.date = ko.observable(shift.date);\r\n    this.rostered_start_time(shift.rostered_start_time);\r\n    this.rostered_end_time(shift.rostered_end_time);\r\n    this.notes(shift.notes);\r\n\r\n};\r\n\r\nShift.prototype.setDateFromArray = function (offset, roster) {\r\n    this.date(moment(roster.date_start(), 'YYYY-MM-DD').isoWeekday(offset).format('YYYY-MM-DD'));\r\n};\r\n\r\nfunction Availability() {\r\n    this.leave_all_day = ko.observable(false);\r\n    this.date = ko.observable(\"\");\r\n    this.weekday = ko.observable(\"\");\r\n    this.general_start_time = ko.observable(moment(\"00:00:00\", \"HH:mm:ss\"));\r\n    this.general_end_time = ko.observable(moment(\"23:59:59\", \"HH:mm:ss\"));\r\n    this.times = ko.observableArray([]);\r\n}\r\n\r\nAvailability.prototype.setDateFromArray = function (offset, roster) {\r\n    this.date(moment(roster.date_start(), 'YYYY-MM-DD').isoWeekday(offset));\r\n    this.weekday(moment(roster.date_start(), 'YYYY-MM-DD').isoWeekday(offset).format('dddd'));\r\n};\r\n\r\n$.urlParam = function (name) {\r\n    var results = new RegExp('[\\\\?&]' + name + '=([^&#]*)').exec(window.location.href);\r\n    console.log(\"Result: \", results);\r\n    console.log(\"location: \", window.location.href);\r\n    if (results == null) {\r\n        return null;\r\n    }\r\n    else {\r\n        return results[1] || 0;\r\n    }\r\n};\r\n\r\n\r\n\r\n// Activates knockout.js\r\nvar view_roster_view_model = new ViewRosterViewModel();\r\nko.applyBindings(view_roster_view_model);\r\nwindow.viewModel = view_roster_view_model;\r\n"],"sourceRoot":"/source/"}